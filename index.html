<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>gbtdost Canlı DOM ve Time&Sales</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f5f5f5;
        }
        table {
            width: 95%;
            margin: 10px auto;
            border-collapse: collapse;
            font-size: 14px;
        }
        th, td {
            padding: 4px;
            border: 1px solid #ddd;
        }
        th {
            background-color: #4CAF50;
            color: white;
        }
        .buy {
            background-color: #e0f7e0;
            color: green;
        }
        .sell {
            background-color: #fbeaea;
            color: red;
        }
        .price {
            background-color: #f0f0f0;
            font-weight: bold;
        }
        .section-title {
            margin-top: 30px;
            font-size: 20px;
            color: #333;
        }
        .dom-table {
            display: inline-block;
            vertical-align: top;
            width: 60%;
        }
        .sales-table {
            display: inline-block;
            vertical-align: top;
            width: 35%;
        }
    </style>
</head>
<body>

<h2>gbtdost Canlı DOM ve Time&Sales</h2>

<div class="dom-table">
    <h3>Order Book (DOM)</h3>
    <table id="dom-table">
        <thead>
            <tr>
                <th>Buy Size</th>
                <th>Bid Price</th>
                <th>Price</th>
                <th>Ask Price</th>
                <th>Sell Size</th>
            </tr>
        </thead>
        <tbody id="dom-body">
            <!-- DOM verisi buraya gelecek -->
        </tbody>
    </table>
</div>

<div class="sales-table">
    <h3>Time & Sales</h3>
    <table id="sales-table">
        <thead>
            <tr>
                <th>Price</th>
                <th>Volume</th>
                <th>Time</th>
            </tr>
        </thead>
        <tbody id="sales-body">
            <!-- Time & Sales verisi buraya gelecek -->
        </tbody>
    </table>
</div>

<script>
    // Sahte veriler üretmek için
    function generateRandomData() {
        const domData = [];
        for (let i = 0; i < 20; i++) {
            const buySize = Math.floor(Math.random() * 100);
            const sellSize = Math.floor(Math.random() * 100);
            const price = (3400 + Math.random() * 10).toFixed(2);
            domData.push({
                buySize: buySize,
                bid: (price - 0.5).toFixed(2),
                price: price,
                ask: (parseFloat(price) + 0.5).toFixed(2),
                sellSize: sellSize
            });
        }

        const salesData = [];
        for (let i = 0; i < 15; i++) {
            const volume = Math.floor(Math.random() * 10) + 1;
            const price = (3400 + Math.random() * 10).toFixed(2);
            const now = new Date();
            const time = now.toLocaleTimeString('tr-TR');
            salesData.push({
                price: price,
                volume: volume,
                time: time
            });
        }

        return { domData, salesData };
    }

    function updateTables() {
        const { domData, salesData } = generateRandomData();

        const domBody = document.getElementById('dom-body');
        domBody.innerHTML = '';
        domData.forEach(row => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td class="buy">${row.buySize}</td>
                <td class="buy">${row.bid}</td>
                <td class="price">${row.price}</td>
                <td class="sell">${row.ask}</td>
                <td class="sell">${row.sellSize}</td>
            `;
            domBody.appendChild(tr);
        });

        const salesBody = document.getElementById('sales-body');
        salesBody.innerHTML = '';
        salesData.forEach(row => {
            const tr = document.createElement('tr');
            const priceClass = parseFloat(row.price) % 2 === 0 ? 'buy' : 'sell';
            tr.innerHTML = `
                <td class="${priceClass}">${row.price}</td>
                <td>${row.volume}</td>
                <td>${row.time}</td>
            `;
            salesBody.appendChild(tr);
        });
    }

    updateTables();
    setInterval(updateTables, 3000); // Her 3 saniyede bir güncelle
</script>

</body>
</html>
