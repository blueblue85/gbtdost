<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DOM + Time & Sales (Demo)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #ffffff;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 50px;
            margin: 20px;
        }
        table {
            border-collapse: collapse;
            width: auto;
            font-size: 12px;
        }
        th, td {
            padding: 4px 8px;
            text-align: center;
            border: 1px solid #ddd;
        }
        th {
            background-color: #f2f2f2;
        }
        .buy {
            color: green;
            font-weight: bold;
        }
        .sell {
            color: red;
            font-weight: bold;
        }
        #orderbook {
            width: 600px;
        }
        #timesales {
            width: 300px;
        }
    </style>
</head>
<body>

<table id="orderbook">
    <thead>
        <tr>
            <th>VAP</th>
            <th>Bid</th>
            <th>Price</th>
            <th>Ask</th>
            <th>Size</th>
            <th>#Orders</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<table id="timesales">
    <thead>
        <tr>
            <th>Price</th>
            <th>Volume</th>
            <th>Time</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<script>
function randomData() {
    const bid = Math.floor(Math.random() * 100) + 10;
    const ask = bid + Math.floor(Math.random() * 10) + 1;
    const price = (bid + ask) / 2;
    const size = Math.floor(Math.random() * 20) + 1;
    const orders = Math.floor(Math.random() * 5) + 1;
    const vap = Math.floor(Math.random() * 500) + 50;
    return { vap, bid, price: price.toFixed(2), ask, size, orders };
}

function randomTimesales() {
    const price = (Math.random() * 100 + 3000).toFixed(2);
    const volume = Math.floor(Math.random() * 20) + 1;
    const date = new Date();
    const time = date.toTimeString().split(' ')[0];
    return { price, volume, time };
}

function updateOrderBook() {
    const tbody = document.querySelector("#orderbook tbody");
    tbody.innerHTML = "";

    for (let i = 0; i < 20; i++) {
        const data = randomData();
        const row = `
            <tr>
                <td>${data.vap}</td>
                <td class="buy">${data.bid}</td>
                <td>${data.price}</td>
                <td class="sell">${data.ask}</td>
                <td>${data.size}</td>
                <td>${data.orders}</td>
            </tr>
        `;
        tbody.innerHTML += row;
    }
}

function updateTimeSales() {
    const tbody = document.querySelector("#timesales tbody");
    const data = randomTimesales();
    const colorClass = Math.random() > 0.5 ? 'buy' : 'sell';
    const row = `
        <tr>
            <td class="${colorClass}">${data.price}</td>
            <td>${data.volume}</td>
            <td>${data.time}</td>
        </tr>
    `;
    tbody.innerHTML = row + tbody.innerHTML;
    if (tbody.rows.length > 20) {
        tbody.deleteRow(-1);
    }
}

setInterval(() => {
    updateOrderBook();
    updateTimeSales();
}, 3000);

updateOrderBook();
updateTimeSales();
</script>

</body>
</html>
